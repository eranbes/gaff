(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{102:function(e,t,a){e.exports=a(112)},112:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(11),c=a.n(l),i=a(10),o=a(149),u=a(169),s=a(140),m=a(42),d=a(143),f=a(148),E=a(114),p=a(151),b=a(152),h=a(75),g=a.n(h),v=a(153),y=a(76),j=a.n(y),O=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))?"http://127.0.0.1:8000":"https://gaff.u0087004.plsk.regruhosting.ru",k={},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n={method:t,mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"}};return a&&(n.body=JSON.stringify(a)),fetch(O+"/"+e,n).then((function(e){return k={status:e.status,ok:e.ok},e})).then((function(e){try{return e.json()}catch(t){return null}})).then((function(e){return k.body=e,k})).catch((function(e){return k.ok||(k.error=e),k}))},x=a(150),C=function(e){var t=e.setRoute,a=e.setPublisherId,l=e.setPublisher,c=Object(n.useState)([]),h=Object(i.a)(c,2),y=h[0],O=h[1],k=Object(n.useState)(""),C=Object(i.a)(k,2),S=C[0],_=C[1],P=Object(n.useState)(!1),N=Object(i.a)(P,2),D=N[0],R=N[1];Object(n.useEffect)((function(){R(!0),w("publishers").then((function(e){R(!1),200===e.status&&O(e.body)}))}),[]);return r.a.createElement(s.a,{container:!0,style:{marginBottom:"1rem"},direction:"column",alignItems:"center",component:d.a},r.a.createElement(s.a,{item:!0},r.a.createElement(m.a,{variant:"h5"},"Publishers")),r.a.createElement(s.a,{item:!0},r.a.createElement(u.a,{label:"New publisher",onChange:function(e){return t=e.target.value,void _(t);var t},value:S}),r.a.createElement(o.a,{variant:"contained",color:"primary",style:{margin:"1rem"},disabled:""===S||D,onClick:function(){S&&!D&&(R(!0),w("publishers","POST",{newPublisher:S}).then((function(e){R(!1),201===e.status&&(O(e.body),_(""))})))}},"add publisher"),r.a.createElement(f.a,null,D?r.a.createElement(x.a,null):null,y.map((function(e){return r.a.createElement(E.a,{key:"listpublisherskey"+e.name},r.a.createElement(p.a,{primary:e.name}),r.a.createElement(b.a,{style:{padding:"1rem"}},r.a.createElement(v.a,{edge:"end",onClick:function(){return n=e.id,a(n),void t("publisher");var n}},r.a.createElement(g.a,null)),r.a.createElement(v.a,{edge:"end",onClick:function(){return function(e){l(e),t("crawl")}(e)}},r.a.createElement(j.a,null))))})))),r.a.createElement(o.a,{variant:"contained",color:"primary",style:{margin:"1rem"},onClick:function(){return t("reports")}},"reports"))},S=a(63),_=a.n(S),P=a(166),N=a(155),D=a(146),R=a(164),W=a(154),q=a(165),A=function(e){var t=e.setRoute,a=e.id,l=Object(n.useState)(null),c=Object(i.a)(l,2),d=c[0],h=c[1],g=Object(n.useState)(0),y=Object(i.a)(g,2),j=y[0],O=y[1],k=Object(n.useState)(""),C=Object(i.a)(k,2),S=C[0],A=C[1],T=Object(n.useState)(""),B=Object(i.a)(T,2),I=B[0],F=B[1],L=Object(n.useState)(""),H=Object(i.a)(L,2),J=H[0],U=H[1],$=Object(n.useState)(""),z=Object(i.a)($,2),G=z[0],M=z[1],V=Object(n.useState)([]),Y=Object(i.a)(V,2),K=Y[0],Q=Y[1],X=Object(n.useState)(!1),Z=Object(i.a)(X,2),ee=Z[0],te=Z[1];Object(n.useEffect)((function(){+a>0&&(te(!0),w("publishers/"+a).then((function(e){te(!1),200===e.status&&(h(e.body.name),Q(e.body.domains))})))}),[a]);var ae=function(e){for(var t=function(t){if(!e.assets.find((function(e){return e.id===t}))&&!e.entries.find((function(e){return e.id===t})))return{v:t}},a=1;a<1e5;a++){var n=t(a);if("object"===typeof n)return n.v}},ne=function(){for(var e=function(e){if(!K.find((function(t){return t.id===e})))return{v:e}},t=1;t<1e5;t++){var a=e(t);if("object"===typeof a)return a.v}},re=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Q((function(t){return t.map((function(t){return t.id===j&&(t.entries.find((function(t){return t.name===S&&e===t.is_app}))||(t.entries.push({id:ae(t),name:S,domain_id:j,is_app:e}),A(""))),t}))}))},le=function(e,t,a){Q((function(n){return n.map((function(n){return n.id===e&&(n[t]=n[t].filter((function(e){return e.id!==a}))),n}))}))},ce=function(e,t,a){Q(K.map((function(n){return n.id===e&&(n[t]=a),n})))};return null===d?r.a.createElement(x.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{container:!0,direction:"column"},r.a.createElement(s.a,{item:!0,style:{margin:"1rem"}},r.a.createElement("span",{style:{fontSize:"2rem",margin:"1rem"}},"Publisher:"),r.a.createElement(u.a,{variant:"outlined",onChange:function(e){return h(e.target.value)},value:d})),"Domains",r.a.createElement(s.a,{item:!0},r.a.createElement(q.a,{border:2},r.a.createElement(s.a,{container:!0,spacing:2},r.a.createElement(s.a,{item:!0,xs:5,style:{margin:"1rem"}},r.a.createElement(u.a,{label:"Add new domain",variant:"outlined",onChange:function(e){return M(e.target.value)},value:G}),r.a.createElement(o.a,{variant:"contained",color:"primary",style:{margin:"1rem",backgroundColor:"#085394"},onClick:function(){return Q((function(e){var t=G;return e.push({id:ne(),name:t,publisher_id:a,assets:[],entries:[],ns_ads:!1,ns_app_ads:!0}),e})),void M("")},disabled:""===G},"add domain")),r.a.createElement(s.a,{item:!0,xs:6},"Domains for "+d,r.a.createElement(q.a,{border:1,style:{margin:"1rem",alignSelf:"center"}},r.a.createElement(f.a,null,K.map((function(e){return r.a.createElement(E.a,{key:"listdonmjsbidgv"+e.id},r.a.createElement(p.a,{primary:e.name}))})))))))),K.length>0?r.a.createElement(s.a,null,"ads.txt/app-ads.txt/assets",r.a.createElement(q.a,{border:2},r.a.createElement(s.a,{container:!0,direction:"column",style:{margin:"1rem"},spacing:2},r.a.createElement(s.a,{item:!0},r.a.createElement(D.a,{variant:"outlined",style:{width:"50%"}},r.a.createElement(R.a,{value:j,onChange:function(e){return O(e.target.value)}},r.a.createElement(W.a,{value:0},"Select Domain To Attach To"),K.map((function(e){return r.a.createElement(W.a,{value:e.id,key:"selecteddomainskeycewvv"+e.id},e.name)}))))),r.a.createElement(s.a,{item:!0},r.a.createElement(s.a,{container:!0},r.a.createElement(s.a,{item:!0,xs:4},r.a.createElement(u.a,{label:"Your txt Entry",variant:"outlined",fullWidth:!0,onChange:function(e){return A(e.target.value)},value:S})),r.a.createElement(s.a,{item:!0},r.a.createElement(o.a,{variant:"contained",color:"primary",style:{margin:"1rem",backgroundColor:"#009E0F"},disabled:""===S||!j,onClick:function(){return re()}},"add to ads.txt")),r.a.createElement(s.a,{item:!0},r.a.createElement(o.a,{variant:"contained",color:"primary",style:{margin:"1rem",backgroundColor:"#009E0F"},disabled:""===S||!j,onClick:function(){return re(!0)}},"add to app-ads.txt")))),r.a.createElement(s.a,{item:!0},r.a.createElement(s.a,{container:!0,spacing:1},r.a.createElement(s.a,{item:!0,xs:4},r.a.createElement(u.a,{label:"Asset Name",variant:"outlined",fullWidth:!0,onChange:function(e){return F(e.target.value)},value:I})),r.a.createElement(s.a,{item:!0,xs:4},r.a.createElement(u.a,{label:"Asset ID",variant:"outlined",fullWidth:!0,onChange:function(e){return U(e.target.value)},value:J})),r.a.createElement(s.a,{item:!0},r.a.createElement(o.a,{variant:"contained",color:"primary",style:{margin:"1rem",backgroundColor:"#9900ff"},disabled:!I||!J||!j,onClick:function(){Q((function(e){return e.map((function(e){return e.id===j&&(console.log(e),e.assets.find((function(e){return e.asset_name===I&&e.asset_id===J}))||(e.assets.push({id:ae(e),asset_name:I,asset_id:J,domain_id:j}),F(""),U(""))),e}))}))}},"add to assets"))))))):null,K.map((function(e){return r.a.createElement(s.a,{key:"listdomainskey"+e.id,style:{marginTop:"1rem"}},r.a.createElement(q.a,{border:2,style:{backgroundColor:"#B2D4E5"}},r.a.createElement(s.a,{container:!0,justify:"space-around"},r.a.createElement(s.a,{item:!0,xs:2,style:{margin:"1rem"}},r.a.createElement(m.a,{variant:"h6"},"Domain"),r.a.createElement(u.a,{onChange:function(t){return ce(e.id,"name",t.target.value)},value:e.name}),r.a.createElement(N.a,{control:r.a.createElement(P.a,{checked:!!e.ns_ads,onChange:function(t){return ce(e.id,"ns_ads",t.target.checked)}}),label:"ads.txt"}),r.a.createElement(N.a,{control:r.a.createElement(P.a,{checked:!!e.ns_app_ads,onChange:function(t){return ce(e.id,"ns_app_ads",t.target.checked)}}),label:"app-ads.txt"})),r.a.createElement(s.a,{item:!0,xs:4,style:{margin:"1rem"}},r.a.createElement(m.a,{variant:"h6"},"Assets"),"object"===typeof e.assets&&e.assets.length>0?r.a.createElement(f.a,null,e.assets.map((function(t){return r.a.createElement(E.a,{key:"listitforassetscildioubrgrgv"+t.id},r.a.createElement(p.a,{primary:t.asset_name+" "+t.asset_id}),r.a.createElement(v.a,{edge:"end",onClick:function(){return le(e.id,"assets",t.id)}},r.a.createElement(_.a,null)))}))):null),r.a.createElement(s.a,{item:!0,xs:5,style:{margin:"1rem"}},"object"===typeof e.entries&&e.entries.length>0?[{text:"ads.txt",is_app:!1},{text:"app-ads.txt",is_app:!0}].map((function(t){return r.a.createElement(f.a,{key:"jgicgjqhcvucgi31"+t.text},r.a.createElement(m.a,{variant:"h6"},t.text),e.entries.filter((function(a){return a.is_app===t.is_app&&e.id===a.domain_id})).map((function(t){return r.a.createElement(E.a,{key:"listentrfewfcsdkey"+t.name+t.id},r.a.createElement(p.a,{primary:t.name}),r.a.createElement(b.a,null,r.a.createElement(v.a,{edge:"end",onClick:function(){return le(e.id,"entries",t.id)}},r.a.createElement(_.a,null))))})))})):null))))}))),ee?r.a.createElement(x.a,null):r.a.createElement(s.a,{container:!0,justify:"space-around",style:{margin:"1rem"}},r.a.createElement(o.a,{variant:"contained",color:"secondary",style:{margin:"1rem"},onClick:function(){return t("publishers")}},"cancel"),r.a.createElement(o.a,{variant:"contained",color:"primary",style:{margin:"1rem"},onClick:function(){return te(!0),void w("publishers/"+a,"PUT",{name:d,domains:K}).then((function(e){te(!1),200===e.status&&(h(e.body.name),Q(e.body.domains))}))},disabled:!d||!!K.find((function(e){return!e.name}))},"save")))},T=a(156),B=a(157),I=a(158),F=a(159),L=a(160),H=a(161),J=function(e){var t=e.setRoute,a=e.publisher,l=Object(n.useState)([]),c=Object(i.a)(l,2),u=c[0],s=c[1],f=Object(n.useState)(!1),E=Object(i.a)(f,2),p=E[0],b=E[1];Object(n.useEffect)((function(){b(!0),w("crawls/"+a.id,"PATCH").then((function(e){b(!1),200===e.status&&s(e.body)}))}),[a]);var h=function(e,t){return t?e.ns_app_ads&&e.entries.length>0?e.app_ads?"parsed":"not exist":"no need":e.ns_ads&&e.entries.length>0?e.ads?"parsed":"not exist":"no need"};return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{variant:"h4",align:"center",style:{margin:"1rem"}},"Publisher: ",a.name),r.a.createElement(T.a,{component:d.a},r.a.createElement(B.a,null,r.a.createElement(I.a,null,r.a.createElement(F.a,null,r.a.createElement(L.a,null,"Domains"),r.a.createElement(L.a,{align:"center"},"ads.txt"),r.a.createElement(L.a,{align:"center"},"app-ads.txt"))),r.a.createElement(H.a,null,p?r.a.createElement(F.a,null,r.a.createElement(L.a,{colSpan:3},r.a.createElement(x.a,null))):u.map((function(e){return r.a.createElement(F.a,{key:"keyfowdomainscrawlqerv"+e.name},r.a.createElement(L.a,{component:"th",scope:"row"},r.a.createElement(m.a,{variant:"h6"},e.name)),r.a.createElement(L.a,{align:"center"},h(e,!1)),r.a.createElement(L.a,{align:"center"},h(e,!0)))}))))),r.a.createElement(o.a,{variant:"contained",style:{margin:"1rem"},onClick:function(){return t("publishers")}},"back"))},U=a(79),$=a(3),z=a(162),G=a(167),M=a(171),V=a(163),Y=a(172),K=a(78),Q=a.n(K),X=a(170);function Z(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}var ee=[{id:"publisher",label:"Publisher"},{id:"name",label:"Domain"},{id:"assets",label:"assets name"},{id:"app_ads",label:"app-ads.txt entries"},{id:"ads",label:"ads.txt entries"}];function te(e){var t=e.classes,a=e.order,n=e.orderBy,l=e.onRequestSort;return r.a.createElement(I.a,null,r.a.createElement(F.a,null,ee.map((function(e){return r.a.createElement(L.a,{key:"keyfortablehead;oitv"+e.label,align:"Publisher"===e.label?"left":"center",sortDirection:n===e.id&&a},r.a.createElement(M.a,{active:n===e.id,direction:n===e.id?a:"asc",onClick:(c=e.id,function(e){l(e,c)})},e.label,n===e.id?r.a.createElement("span",{className:t.visuallyHidden},"desc"===a?"sorted descending":"sorted ascending"):null));var c}))))}var ae=Object(z.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},title:{flex:"1 1 100%"},grid:{margin:"1rem"}}})),ne=Object(z.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}})),re=function(e){var t=e.setRoute,a=ne(),l=Object(n.useState)([]),c=Object(i.a)(l,2),u=c[0],b=c[1],h=Object(n.useState)("asc"),g=Object(i.a)(h,2),y=g[0],j=g[1],O=Object(n.useState)("publisher"),k=Object(i.a)(O,2),C=k[0],S=k[1],_=Object(n.useState)(0),P=Object(i.a)(_,2),N=P[0],q=P[1],A=Object(n.useState)(5),I=Object(i.a)(A,2),J=I[0],z=I[1],M=Object(n.useState)(!1),K=Object(i.a)(M,2),ee=K[0],re=K[1],le=Object(n.useState)(!1),ce=Object(i.a)(le,2),ie=ce[0],oe=ce[1],ue=Object(n.useState)(""),se=Object(i.a)(ue,2),me=se[0],de=se[1],fe=Object(n.useState)(""),Ee=Object(i.a)(fe,2),pe=Ee[0],be=Ee[1],he=Object(n.useState)(""),ge=Object(i.a)(he,2),ve=ge[0],ye=ge[1];Object(n.useEffect)((function(){re(!0),w("crawls").then((function(e){re(!1),200===e.status&&b(e.body)}))}),[]);var je=function(){var e,t=ae();return r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a,{className:Object($.a)(t.root)},r.a.createElement(m.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div"},"Reports"),r.a.createElement(Y.a,{title:"Filter list"},r.a.createElement(v.a,{onClick:function(e){return oe(!ie)}},r.a.createElement(Q.a,null)))),ie?r.a.createElement(s.a,{container:!0,className:t.grid,spacing:1},r.a.createElement(s.a,{item:!0,xs:4},r.a.createElement(D.a,{fullWidth:!0},r.a.createElement(X.a,null,"Select publisher..."),r.a.createElement(R.a,{fullWidth:!0,value:me,onChange:function(e){return de(e.target.value)}},r.a.createElement(W.a,{value:""},"None"),u.map((function(e){return e.publisher})).filter((function(e,t,a){return a.indexOf(e)===t})).map((function(e){return r.a.createElement(W.a,{value:e,key:"hcbehvsjehcve"+e},e)}))))),r.a.createElement(s.a,{item:!0,xs:4},r.a.createElement(D.a,{fullWidth:!0},r.a.createElement(X.a,null,"Select domain..."),r.a.createElement(R.a,{fullWidth:!0,value:pe,onChange:function(e){return be(e.target.value)}},r.a.createElement(W.a,{value:""},"None"),u.map((function(e){return e.name})).filter((function(e,t,a){return a.indexOf(e)===t})).map((function(e){return r.a.createElement(W.a,{value:e,key:"uiqgdiquhweiwcvj"+e},e)}))))),r.a.createElement(s.a,{item:!0,xs:3},r.a.createElement(D.a,{fullWidth:!0},r.a.createElement(X.a,{id:"demo-simple-select-helper-label"},"Select asset..."),r.a.createElement(R.a,{fullWidth:!0,value:ve,onChange:function(e){return ye(e.target.value)}},r.a.createElement(W.a,{value:""},"None"),r.a.createElement(W.a,{value:"not exists"},"Not exists"),(e=[]).concat.apply(e,Object(U.a)(u.map((function(e){return e.assets})).filter((function(e){return e.length>0})).map((function(e){return e.map((function(e){return e.asset_name}))})))).filter((function(e,t,a){return a.indexOf(e)===t})).map((function(e){return r.a.createElement(W.a,{value:e,key:"ecgnqweixqguyqgnq"+e},e)})))))):null)},Oe=[{name:"UNAVAILABLE",color:"grey"},{name:"ADDED",color:"green"},{name:"DELETED",color:"red"}],ke=function(e){return 0===e.length?"N/A":r.a.createElement(f.a,null,e.map((function(e){var t=Oe[e.status_id];return r.a.createElement(E.a,{key:"entrieskeyforcriwuerbkver"+e.id,style:{backgroundColor:t.color,color:"white",margin:0,padding:0}},r.a.createElement(p.a,{primary:e.entry_name,secondary:t.name+", add: "+e.created_at+", upd: "+e.updated_at}))})))};return r.a.createElement("div",{className:a.root},r.a.createElement(d.a,{className:a.paper},r.a.createElement(je,null),r.a.createElement(T.a,null,r.a.createElement(B.a,{className:a.table,"aria-labelledby":"tableTitle","aria-label":"enhanced table"},r.a.createElement(te,{classes:a,order:y,orderBy:C,onRequestSort:function(e,t){j(C===t&&"asc"===y?"desc":"asc"),S(t)},rowCount:u.length}),r.a.createElement(H.a,null,ee?r.a.createElement(F.a,null,r.a.createElement(L.a,{colSpan:5},r.a.createElement(x.a,null))):function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0===n?e[1]-a[1]:n})),a.map((function(e){return e[0]}))}(u,function(e,t){return"desc"===e?function(e,a){return Z(e,a,t)}:function(e,a){return-Z(e,a,t)}}(y,C)).filter((function(e){return function(e){return(!me||me===e.publisher)&&((!pe||pe===e.name)&&(!ve||("not exists"===ve&&0===e.assets.length||Boolean(e.assets.find((function(e){return ve===e.asset_name}))))))}(e)})).slice(N*J,N*J+J).map((function(e){return r.a.createElement(F.a,{hover:!0,tabIndex:-1,key:e.name},r.a.createElement(L.a,{component:"th",scope:"row"},e.publisher),r.a.createElement(L.a,{align:"center"},e.name),r.a.createElement(L.a,{align:"center"},0===(t=e.assets).length?"not exists":r.a.createElement(f.a,null,t.map((function(e){return r.a.createElement(E.a,{key:"assetskeyfowqerg"+e.id},e.asset_name)})))),r.a.createElement(L.a,{align:"center"},ke(e.app_ads)),r.a.createElement(L.a,{align:"center"},ke(e.ads)));var t}))))),r.a.createElement(G.a,{rowsPerPageOptions:[5,20,30],component:"div",count:u.length,rowsPerPage:J,page:N,onChangePage:function(e,t){q(t)},onChangeRowsPerPage:function(e){z(parseInt(e.target.value,10)),q(0)}})),r.a.createElement(o.a,{variant:"contained",style:{margin:"1rem"},onClick:function(){return t("publishers")}},"back"))};var le=function(){var e=Object(n.useState)("publishers"),t=Object(i.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(0),o=Object(i.a)(c,2),u=o[0],s=o[1],m=Object(n.useState)([]),d=Object(i.a)(m,2),f=d[0],E=d[1];return"publishers"===a?r.a.createElement(C,{setRoute:l,setPublisherId:s,setPublisher:E}):"publisher"===a?r.a.createElement(A,{setRoute:l,id:u}):"crawl"===a?r.a.createElement(J,{setRoute:l,publisher:f}):"reports"===a?r.a.createElement(re,{setRoute:l}):null};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[102,1,2]]]);
//# sourceMappingURL=main.13feeb5a.chunk.js.map